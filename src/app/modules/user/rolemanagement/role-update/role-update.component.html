<div class="dialog-container">
  <div class="dialog-header">
    <h3>Module Permissions</h3>

    <button mat-icon-button color="warn" (click)="onClose()">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <div class="permissions-section" *ngFor="let role of roles">
    <div class="module-header">
      <h4>{{ role.module.name }}</h4>
    </div>

    <div class="checkbox-row">
      <app-checkbox
        label="All"
        [checked]="isAllChecked(role.permissions)"
        (changed)="onAllPermissionsChange(role, $event)">
      </app-checkbox>

      <app-checkbox
        label="Write"
        [checked]="role.permissions.write"
        (changed)="onPermissionChange(role, 'write', $event)">
      </app-checkbox>

      <app-checkbox
        label="Update"
        [checked]="role.permissions.update"
        (changed)="onPermissionChange(role, 'update', $event)">
      </app-checkbox>

      <app-checkbox
        label="Delete"
        [checked]="role.permissions.delete"
        (changed)="onPermissionChange(role, 'delete', $event)">
      </app-checkbox>

      <app-checkbox
        label="Read"
        [checked]="role.permissions.read"
        (changed)="onPermissionChange(role, 'read', $event)">
      </app-checkbox>
    </div>
  </div>

  <div class="button-container">
    <app-button [data]="{
        label: 'Submit',
        color: 'primary',
        icon: 'send',
        disabled: false,
        type: 'submit',
        customClass: 'my-button-class'
      }">
    </app-button>
  </div>
</div>
